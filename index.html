<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Boricua Radio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap for responsive layout and utility classes -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  <style>
    /* üåä General body styling */
    body {
      background-color: teal;
      height: 100vh;
      overflow: hidden;
    }

    /* üñ•Ô∏è Desktop background and font */
    .app-desktop {
      background-image: url("https://pa1.aminoapps.com/6352/668e57808b4374c1c1ff717a8ba4a8985b6e03c1_00.gif");
      background-size: cover;
      font-family: "MS Sans Serif", sans-serif;
    }

    /* ü™ü Window styling */
    .window {
      position: absolute;
      top: 100px;
      left: 100px;
      width: 350px;
      background: #c0c0c0;
      border: 2px solid #000;
      box-shadow: inset -1px -1px #fff, inset 1px 1px #808080;
      z-index: 100;
    }

    .inner {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    /* üß¢ Window header bar */
    .header {
      background: navy;
      color: white;
      padding: 4px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: move;
    }

    .buttons {
      display: flex;
    }

    .buttons button {
      background: silver;
      border: 1px solid black;
      margin-left: 4px;
      width: 16px;
      height: 16px;
      padding: 0;
      font-size: 10px;
      line-height: 1;
    }

    .buttons button span {
      display: block;
      height: 100%;
    }

    .buttons button.maximize span {
      background: gray;
    }

    /* üìÇ Menu bar */
    .menu-bar {
      display: flex;
      background: silver;
      padding: 2px;
    }

    .menu-item {
      margin-right: 10px;
      position: relative;
    }

    .menu-item:hover .submenu {
      display: block;
    }

    /* üìú Submenu dropdown */
    .submenu {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: silver;
      border: 1px solid black;
      padding: 5px;
    }

    /* üì¶ Content section */
    .content {
      flex-grow: 1;
      padding: 10px;
      background: white;
    }

    /* üñºÔ∏è Album artwork */
    #artwork {
      width: 100px;
      height: 100px;
      margin-right: 10px;
    }

    /* üîä Volume slider */
    #volumeSlider {
      width: 100px;
    }

    /* üïì Elapsed time */
    #elapsedTime {
      margin-top: 10px;
      font-weight: bold;
    }

    /* ü™ü Taskbar */
    .taskbar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 40px;
      background: silver;
      border-top: 2px solid #000;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 10px;
      box-shadow: inset 0 -1px #fff, inset 0 1px #808080;
    }

    .taskbar button {
      background: #c0c0c0;
      border: 2px outset #fff;
      padding: 5px 10px;
      display: flex;
      align-items: center;
    }

    .taskbar .title {
      margin-left: 5px;
    }

    #clock {
      font-weight: bold;
    }

    /* üì± Mobile responsiveness */
    @media (max-width: 600px) {
      .window {
        width: 90%;
        top: 50px;
        left: 5%;
      }
    }
  </style>
</head>
<body>

  <!-- üìª Main application container -->
  <div class="app-desktop">
    
    <!-- üì¶ Main radio window -->
    <div class="window" id="radioWindow">
      <div class="inner">

        <!-- üß¢ Header bar with title and buttons -->
        <div class="header">
          <div class="d-flex align-items-center">
            <img src="https://cdn-icons-png.flaticon.com/512/64/64572.png" width="16" height="16" class="mr-2">
            <span>Boricua Radio</span>
          </div>
          <div class="buttons">
            <button id="minimizeBtn"><span>-</span></button>
            <button id="maximizeBtn" class="maximize"><span>[ ]</span></button>
          </div>
        </div>

        <!-- üìã Top menu bar -->
        <div class="menu-bar">
          <div class="menu-item">File
            <div class="submenu">
              <div>New</div>
              <div>Open</div>
            </div>
          </div>
          <div class="menu-item">Edit
            <div class="submenu">
              <div>Copy</div>
              <div>Paste</div>
            </div>
          </div>
          <div class="menu-item">Help
            <div class="submenu">
              <div>About</div>
            </div>
          </div>
        </div>

        <!-- üìª Radio content -->
        <div class="content">
          <button id="playBtn">‚ñ∂Ô∏è Play</button>
          <button id="stopBtn">‚èπÔ∏è Stop</button>
          <div id="nowPlaying">Now Playing: Loading...</div>

          <div style="display: flex; align-items: center; margin-top: 10px;">
            <img id="artwork" src="">
            <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.5">
          </div>

          <!-- üîä Hidden audio element -->
          <audio id="radioPlayer" src="http://radio.plaza.one/mp3"></audio>

          <!-- ‚è±Ô∏è Timer display -->
          <div id="elapsedTime">
            Listening Time: <span id="timeDisplay">00:00</span>
          </div>
        </div>

      </div>
    </div>

    <!-- üß≠ Bottom taskbar -->
    <div class="taskbar">
      <button id="taskbarBtn">
        <img src="https://cdn-icons-png.flaticon.com/512/64/64572.png" width="16" height="16">
        <div class="title">Boricua Radio</div>
      </button>
      <button id="clockBtn">
        <span id="clock"></span>
      </button>
    </div>
  </div>

  <!-- üß† JavaScript functionality -->
  <script>
    const playBtn = document.getElementById('playBtn');
    const stopBtn = document.getElementById('stopBtn');
    const player = document.getElementById('radioPlayer');
    const nowPlaying = document.getElementById('nowPlaying');
    const artwork = document.getElementById('artwork');
    const volumeSlider = document.getElementById('volumeSlider');
    const radioWindow = document.getElementById('radioWindow');
    const taskbarBtn = document.getElementById('taskbarBtn');
    const minimizeBtn = document.getElementById('minimizeBtn');
    const maximizeBtn = document.getElementById('maximizeBtn');
    const clock = document.getElementById('clock');
    const timeDisplay = document.getElementById('timeDisplay');

    let timerInterval;
    let seconds = 0;

    // ‚ñ∂Ô∏è Start radio
    playBtn.addEventListener('click', () => {
      player.play();
      startTimer();
    });

    // ‚èπÔ∏è Stop radio
    stopBtn.addEventListener('click', () => {
      player.pause();
      player.currentTime = 0;
      stopTimer();
    });

    // üïí Update clock
    function updateClock() {
      const now = new Date();
      const hours = now.getHours() % 12 || 12;
      const minutes = now.getMinutes().toString().padStart(2, '0');
      const ampm = now.getHours() >= 12 ? 'PM' : 'AM';
      clock.textContent = `${hours}:${minutes} ${ampm}`;
    }
    setInterval(updateClock, 1000);
    updateClock();

    // üñ±Ô∏è Make window draggable
    let offsetX, offsetY, isDragging = false;
    radioWindow.querySelector('.header').addEventListener('mousedown', e => {
      isDragging = true;
      offsetX = e.clientX - radioWindow.offsetLeft;
      offsetY = e.clientY - radioWindow.offsetTop;
    });
    document.addEventListener('mousemove', e => {
      if (isDragging) {
        radioWindow.style.left = `${e.clientX - offsetX}px`;
        radioWindow.style.top = `${e.clientY - offsetY}px`;
      }
    });
    document.addEventListener('mouseup', () => {
      isDragging = false;
    });

    // ‚ûñ Minimize window
    minimizeBtn.addEventListener('click', () => {
      radioWindow.style.display = 'none';
    });

    // ü™ü Toggle window visibility from taskbar
    taskbarBtn.addEventListener('click', () => {
      radioWindow.style.display = radioWindow.style.display === 'none' ? 'block' : 'none';
    });

    // üóñ Maximize/fullscreen toggle
    maximizeBtn.addEventListener('click', () => {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    });

    // üîä Volume control
    volumeSlider.addEventListener('input', () => {
      player.volume = volumeSlider.value;
    });

    // üéµ Fetch now playing info
    function fetchNowPlaying() {
      fetch('https://radio.plaza.one/status-json.xsl')
        .then(response => response.json())
        .then(data => {
          const title = data.icestats.source.title;
          nowPlaying.textContent = `Now Playing: ${title}`;
          fetchArtwork(title);
        });
    }

    // üé® Fetch album artwork from iTunes
    function fetchArtwork(query) {
      const apiUrl = `https://itunes.apple.com/search?term=${encodeURIComponent(query)}&entity=song&limit=1`;
      fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          if (data.results.length > 0) {
            artwork.src = data.results[0].artworkUrl100;
          }
        });
    }

    // üîÅ Refresh now playing every 30 seconds
    fetchNowPlaying();
    setInterval(fetchNowPlaying, 30000);

    // ‚è±Ô∏è Start and stop listening timer
    function startTimer() {
      if (!timerInterval) {
        timerInterval = setInterval(() => {
          seconds++;
          const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
          const secs = (seconds % 60).toString().padStart(2, '0');
          timeDisplay.textContent = `${mins}:${secs}`;
        }, 1000);
      }
    }

    function stopTimer() {
      clearInterval(timerInterval);
      timerInterval = null;
      seconds = 0;
      timeDisplay.textContent = "00:00";
    }
  </script>
</body>
</html>
